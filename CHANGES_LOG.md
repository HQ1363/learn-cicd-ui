# æ›´æ”¹æ—¥å¿—

## ğŸ“… 2024-01-XX - Mock ç³»ç»Ÿå®Œæ•´å®ç°

### ğŸ¯ ç›®æ ‡

å»é™¤ç™»å½•é™åˆ¶ï¼Œä½¿é¡¹ç›®åœ¨å¼€å‘ç¯å¢ƒä¸‹å®Œå…¨ä¸ä¾èµ–åç«¯APIï¼Œæ‰€æœ‰æ•°æ®ä½¿ç”¨æµ‹è¯•æ•°æ®ï¼Œæ”¯æŒ Pipeline çš„å®Œæ•´å¢åˆ æ”¹æŸ¥æ“ä½œã€‚

### âœ… å·²å®Œæˆçš„ä¿®æ”¹

#### 1. æ ¸å¿ƒåŠŸèƒ½å®ç°

##### 1.1 Mock æ‹¦æˆªå™¨åˆå§‹åŒ–
- **æ–‡ä»¶**: `src/index.js`
- **ä¿®æ”¹**: æ·»åŠ  Mock åˆå§‹åŒ–è°ƒç”¨
- **å½±å“**: åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯ç”¨ Mock æ¨¡å¼

##### 1.2 ç»•è¿‡ç™»å½•éªŒè¯
- **æ–‡ä»¶**: `src/common/layout/Layout.js`
- **ä¿®æ”¹**: å¼€å‘ç¯å¢ƒä¸‹ä¸ä½¿ç”¨ `UserVerify` é«˜é˜¶ç»„ä»¶
- **å½±å“**: æ‰“å¼€é¡µé¢ç›´æ¥è¿›å…¥åº”ç”¨ï¼Œæ— éœ€ç™»å½•

##### 1.3 æ¡ä»¶åŠ è½½è·¯ç”±
- **æ–‡ä»¶**: `src/routes.js`
- **ä¿®æ”¹**: å¼€å‘ç¯å¢ƒä¸‹ä¸åŠ è½½ç™»å½•ç›¸å…³è·¯ç”±
- **å½±å“**: ç§»é™¤ç™»å½•ã€ç™»å‡ºã€æœªæˆæƒç­‰è·¯ç”±

##### 1.4 Mock åˆå§‹åŒ–å™¨
- **æ–‡ä»¶**: `src/common/utils/InitMock.js`
- **åŠŸèƒ½**:
  - åˆ¤æ–­æ˜¯å¦ä¸ºå¼€å‘ç¯å¢ƒ
  - æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•çŠ¶æ€ï¼ˆlocalStorage + sessionStorageï¼‰
  - æ‹¦æˆªæ‰€æœ‰ Axios è¯·æ±‚ï¼ˆPOSTã€GETã€PUTã€DELETEï¼‰
  - å¤„ç† FormData ç±»å‹æ•°æ®
  - æ·»åŠ ç½‘ç»œå»¶è¿Ÿæ¨¡æ‹Ÿï¼ˆ100msï¼‰
  - æä¾›æ¢å¤åŸå§‹è¯·æ±‚çš„æ–¹æ³• (`window.__restoreMock()`)

##### 1.5 Mock æ•°æ®ç®¡ç†
- **æ–‡ä»¶**: `src/common/utils/MockData.js`
- **åŠŸèƒ½**:
  - å®šä¹‰ Mock æ•°æ®å­˜å‚¨ï¼ˆå†…å­˜ä¸­ï¼‰
  - å®ç° 50+ API æ¥å£çš„ Mock
  - æ”¯æŒç²¾ç¡®åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…
  - æä¾›é»˜è®¤å…œåº•å“åº”

#### 2. æ”¯æŒçš„ API æ¥å£

##### Pipeline ç›¸å…³ (20+ ä¸ª)
- `findUserPipelinePage` - åˆ†é¡µæŸ¥è¯¢ï¼ˆæ”¯æŒç­›é€‰ï¼‰
- `findPipeline` - å•ä¸ªæŸ¥è¯¢
- `findPipelineList` / `findUserPipeline` - åˆ—è¡¨æŸ¥è¯¢
- `createPipeline` - åˆ›å»º
- `updatePipeline` - æ›´æ–°
- `deletePipeline` - åˆ é™¤
- `pipelineClone` - å…‹éš†
- `findPipelineCloneName` - è·å–å…‹éš†åç§°
- `importPipelineYaml` - å¯¼å‡º YAML
- `findPipelineCount` - ç»Ÿè®¡
- `findOpenPage` - å¸¸ç”¨æµæ°´çº¿
- `followPipeline` / `updateFollow` - æ”¶è—/å–æ¶ˆæ”¶è—
- `findRecentlyPipeline` - åˆ‡æ¢æµæ°´çº¿
- `updateOpen` - æ›´æ–°æœ€è¿‘æ‰“å¼€
- `updatePipelineRootUser` - æ›´æ¢è´Ÿè´£äºº
- `findPipelineAndQuery` - æŸ¥è¯¢è¯¦æƒ…

##### ç¯å¢ƒç®¡ç† (4ä¸ª)
- `findEnvList` / `findEnvPage` - æŸ¥è¯¢
- `createEnv` - åˆ›å»º
- `updateEnv` - æ›´æ–°
- `deleteEnv` - åˆ é™¤

##### åº”ç”¨åˆ†ç»„ (6ä¸ª)
- `findGroupList` / `findGroupPage` / `findGroupingList` - æŸ¥è¯¢
- `createGroup` - åˆ›å»º
- `updateGroup` - æ›´æ–°
- `deleteGroup` - åˆ é™¤

##### ç”¨æˆ·ç®¡ç† (5ä¸ª)
- `findUserPage` / `findUserList` - æŸ¥è¯¢ç”¨æˆ·
- `findDmUserPage` - æŸ¥è¯¢é¡¹ç›®ç”¨æˆ·
- `findAllList` - æŸ¥è¯¢ç”¨æˆ·ç›®å½•
- `getSystemPermissions` - è·å–æƒé™ï¼ˆè¿”å›æ‰€æœ‰æƒé™ï¼‰
- `validPrivilege` - æƒé™éªŒè¯ï¼ˆæ€»æ˜¯è¿”å› trueï¼‰

##### å…¶ä»–åŠŸèƒ½ (10+ä¸ª)
- å˜é‡ç®¡ç†ï¼ˆ`findVariableList`, `findVariablePage`ï¼‰
- Agent ç®¡ç†ï¼ˆ`findAgentList`, `findAgentPage`ï¼‰
- æˆæƒç®¡ç†ï¼ˆ`findAuthList`ï¼‰
- ä¸»æœºç®¡ç†ï¼ˆ`findHostList`, `findHostPage`ï¼‰
- æœåŠ¡å™¨é…ç½®ï¼ˆ`findAuthServerList`, `findAuthServerPage`ï¼‰
- å·¥å…·ç®¡ç†ï¼ˆ`findToolList`ï¼‰
- K8s é…ç½®ï¼ˆ`findK8sList`ï¼‰
- è§’è‰²æƒé™ï¼ˆ`findRoleList`ï¼‰
- æ¶ˆæ¯é€šçŸ¥ï¼ˆ`findMessageList`, `findUnreadCount`ï¼‰
- å†å²è®°å½•ï¼ˆ`findHistoryPage`ï¼‰
- æµ‹è¯•æŠ¥å‘Šï¼ˆ`findTestOverview`ï¼‰
- èµ„æºç»Ÿè®¡ï¼ˆ`findResourceOverview`ï¼‰
- OpenAPIï¼ˆ`findOpenApiList`ï¼‰
- ç»„ç»‡æ¶æ„ï¼ˆ`findOrgaList`ï¼‰
- ç”¨æˆ·ç»„ï¼ˆ`findUserGroupPage`ï¼‰
- ç›®å½•ç®¡ç†ï¼ˆ`findDirectoryList`ï¼‰
- å¤‡ä»½æ¢å¤ï¼ˆ`findBackupList`ï¼‰
- ç‰ˆæœ¬ä¿¡æ¯ï¼ˆ`getVersion`ï¼‰
- æˆæƒä¿¡æ¯ï¼ˆ`getProductAuth`ï¼‰
- åŠ¨æ€æ¶ˆæ¯ï¼ˆ`findDynamicPage`ï¼‰
- æ¦‚è§ˆæ•°æ®ï¼ˆ`findOverview`ï¼‰

#### 3. é¢„ç½®æµ‹è¯•æ•°æ®

##### Pipeline (3ä¸ª)
1. Webå‰ç«¯æ„å»ºæµæ°´çº¿ (æˆåŠŸçŠ¶æ€)
2. Javaåç«¯æœåŠ¡æµæ°´çº¿ (è¿è¡Œä¸­çŠ¶æ€)
3. Dockeré•œåƒæ„å»ºæµæ°´çº¿ (å¤±è´¥çŠ¶æ€)

##### ç¯å¢ƒ (3ä¸ª)
1. å¼€å‘ç¯å¢ƒ (dev)
2. æµ‹è¯•ç¯å¢ƒ (test)
3. ç”Ÿäº§ç¯å¢ƒ (prod)

##### åº”ç”¨åˆ†ç»„ (2ä¸ª)
1. å‰ç«¯åº”ç”¨
2. åç«¯æœåŠ¡

##### ç”¨æˆ· (3ä¸ª)
1. ç®¡ç†å‘˜ (admin) - å½“å‰ç™»å½•ç”¨æˆ·
2. å¼€å‘è€… (developer)
3. æµ‹è¯•å‘˜ (tester)

#### 4. æ–°å¢æ–‡æ¡£

##### 4.1 å¼€å‘æŒ‡å—
- **æ–‡ä»¶**: `DEV_MOCK_GUIDE.md`
- **å†…å®¹**: å®Œæ•´çš„ Mock ç³»ç»Ÿä½¿ç”¨æŒ‡å—

##### 4.2 å®ç°æ€»ç»“
- **æ–‡ä»¶**: `MOCK_IMPLEMENTATION_SUMMARY.md`
- **å†…å®¹**: è¯¦ç»†çš„æŠ€æœ¯å®ç°è¯´æ˜

##### 4.3 å¿«é€Ÿå¼€å§‹
- **æ–‡ä»¶**: `QUICK_START_MOCK.md`
- **å†…å®¹**: ä¸€åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—

##### 4.4 æ›´æ”¹æ—¥å¿—
- **æ–‡ä»¶**: `CHANGES_LOG.md` (æœ¬æ–‡ä»¶)
- **å†…å®¹**: æ‰€æœ‰ä¿®æ”¹çš„è®°å½•

### ğŸ‰ å®ç°çš„æ•ˆæœ

#### å¼€å‘ä½“éªŒ
- âœ… æ— éœ€å¯åŠ¨åç«¯æœåŠ¡
- âœ… æ— éœ€ç™»å½•ï¼Œç›´æ¥è¿›å…¥åº”ç”¨
- âœ… æ‰€æœ‰æ“ä½œç«‹å³ç”Ÿæ•ˆ
- âœ… è¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿—
- âœ… æ”¯æŒä¸´æ—¶æ¢å¤çœŸå®è¯·æ±‚

#### åŠŸèƒ½å®Œæ•´æ€§
- âœ… Pipeline å®Œæ•´çš„ CRUD æ“ä½œ
- âœ… æ”¯æŒæœç´¢ã€ç­›é€‰ã€åˆ†é¡µ
- âœ… æ”¯æŒå…‹éš†ã€æ”¶è—ç­‰é«˜çº§åŠŸèƒ½
- âœ… æ•°æ®å®æ—¶æ›´æ–°ï¼ˆå†…å­˜ä¸­ï¼‰
- âœ… æ¨¡æ‹ŸçœŸå®çš„ç½‘ç»œå»¶è¿Ÿ

#### æ•°æ®çœŸå®æ€§
- âœ… å®Œæ•´çš„æ•°æ®ç»“æ„
- âœ… çœŸå®çš„ä¸šåŠ¡åœºæ™¯
- âœ… åˆç†çš„æµ‹è¯•æ•°æ®
- âœ… æ ‡å‡†çš„å“åº”æ ¼å¼

#### ç¯å¢ƒéš”ç¦»
- âœ… åªåœ¨å¼€å‘ç¯å¢ƒå¯ç”¨
- âœ… ç”Ÿäº§ç¯å¢ƒä¸å—å½±å“
- âœ… å¯ä»¥è½»æ¾åˆ‡æ¢

### ğŸ“ ä½¿ç”¨æ–¹æ³•

#### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm install
npm run dev
```

#### è®¿é—®åº”ç”¨
```
http://localhost:8080
```

#### æŸ¥çœ‹æ—¥å¿—
æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹ Mock æ—¥å¿—ï¼š
```
[Mock] ğŸ­ å¯ç”¨ Mock æ¨¡å¼
[Mock] ğŸ‘¤ å·²æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•çŠ¶æ€: admin
[Mock] âœ… Mock æ‹¦æˆªå™¨åˆå§‹åŒ–å®Œæˆ
```

#### ä¸´æ—¶æ¢å¤çœŸå®è¯·æ±‚
åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼š
```javascript
window.__restoreMock()
```

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æŒä¹…åŒ–**
   - Mock æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­
   - åˆ·æ–°é¡µé¢åä¼šé‡ç½®ä¸ºåˆå§‹çŠ¶æ€
   - å¦‚éœ€æŒä¹…åŒ–ï¼Œéœ€è¦è¿æ¥çœŸå®åç«¯

2. **ç¯å¢ƒéš”ç¦»**
   - Mock ç³»ç»Ÿåªåœ¨ `NODE_ENV === 'development'` æ—¶å¯ç”¨
   - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çœŸå® APIï¼Œä¸å—å½±å“

3. **FormData å¤„ç†**
   - ç³»ç»Ÿä¼šè‡ªåŠ¨å°† FormData è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡
   - æ”¯æŒæ‰€æœ‰å¸¸è§çš„è¡¨å•æäº¤åœºæ™¯

4. **æƒé™ç³»ç»Ÿ**
   - å¼€å‘ç¯å¢ƒä¸‹æ¨¡æ‹Ÿç®¡ç†å‘˜æƒé™
   - æ‰€æœ‰æƒé™éªŒè¯éƒ½è¿”å› true

### ğŸ”§ æŠ€æœ¯ç»†èŠ‚

#### æ‹¦æˆªæœºåˆ¶
```javascript
// ä¿å­˜åŸå§‹æ–¹æ³•
const originalPost = Axios.post;

// æ‹¦æˆªè¯·æ±‚
Axios.post = function(url, data, config) {
    return new Promise((resolve) => {
        setTimeout(() => {
            const mockData = getMockData(url, data);
            resolve(mockData);
        }, 100);
    });
};
```

#### æ•°æ®åŒ¹é…
```javascript
// 1. ç²¾ç¡®åŒ¹é…
if (mockDataMap[url]) {
    return mockDataMap[url](data);
}

// 2. æ¨¡ç³ŠåŒ¹é…
if (url.includes('/create')) {
    return successResponse({...});
}

// 3. é»˜è®¤å…œåº•
return successResponse(null);
```

#### ç”¨æˆ·ç™»å½•æ¨¡æ‹Ÿ
```javascript
const mockUser = {
    userId: 'mock-user-001',
    username: 'admin',
    nickname: 'ç®¡ç†å‘˜',
    // ...
};

localStorage.setItem('userId', mockUser.userId);
sessionStorage.setItem('user', JSON.stringify(mockUser));
```

### ğŸ“Š ä»£ç ç»Ÿè®¡

- **ä¿®æ”¹æ–‡ä»¶**: 3 ä¸ª
- **æ–°å¢æ–‡ä»¶**: 4 ä¸ªï¼ˆæ–‡æ¡£ï¼‰
- **æ–°å¢ API Mock**: 50+ ä¸ª
- **é¢„ç½®æµ‹è¯•æ•°æ®**: 11 ä¸ªå®ä½“
- **ä»£ç è¡Œæ•°**: ~600 è¡Œï¼ˆMock ç›¸å…³ï¼‰

### ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

#### å¯èƒ½çš„æ”¹è¿›
1. æ·»åŠ æ›´å¤šæµ‹è¯•æ•°æ®
2. æ”¯æŒæ›´å¤š API æ¥å£
3. å®ç° LocalStorage æŒä¹…åŒ–
4. æ·»åŠ  Mock æ•°æ®ç¼–è¾‘å™¨
5. æ”¯æŒå¯¼å…¥/å¯¼å‡º Mock æ•°æ®

#### ç»´æŠ¤å»ºè®®
1. å½“åç«¯ API å˜åŒ–æ—¶ï¼ŒåŒæ­¥æ›´æ–° Mock æ•°æ®
2. ä¸ºæ–°åŠŸèƒ½æ·»åŠ ç›¸åº”çš„ Mock æ¥å£
3. å®šæœŸæ£€æŸ¥ Mock æ•°æ®çš„æœ‰æ•ˆæ€§
4. ä¿æŒ Mock æ•°æ®ä¸çœŸå®æ•°æ®ç»“æ„ä¸€è‡´

### ğŸ™ è‡´è°¢

æ„Ÿè°¢ä½ çš„è€å¿ƒç­‰å¾…ï¼ŒMock ç³»ç»Ÿç°åœ¨å·²ç»å®Œå…¨å¯ç”¨ï¼

### ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](./QUICK_START_MOCK.md)
- [å¼€å‘æŒ‡å—](./DEV_MOCK_GUIDE.md)
- [å®ç°æ€»ç»“](./MOCK_IMPLEMENTATION_SUMMARY.md)
- [åŸæœ‰ Mock è¯´æ˜](./MOCK_README.md)

---

**ç‰ˆæœ¬**: v1.0.0  
**æ—¥æœŸ**: 2024-01-XX  
**çŠ¶æ€**: âœ… å·²å®Œæˆ

